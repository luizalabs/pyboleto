image: ubuntu:18.04

before_script:
  - apt-get update
  - apt-get install -y locales
  - echo "en_US UTF-8" > /etc/locale.gen
  - locale-gen en_US.UTF-8
  - export LANG=en_US.UTF-8
  - export LANGUAGE=en_US:en
  - export LC_ALL=en_US.UTF-8


unit-tests-py2:
  script:
    - export PYTHONHTTPSVERIFY=0
    - apt-get install -y poppler-utils python python-dev python-setuptools
    - python setup.py test

  only:
    - merge_requests
    - tags
    - master

unit-tests-py3:
  script:
    - apt-get install -y poppler-utils python3.7 python3.7-dev python3-pip
    - python3.7 setup.py test

  only:
    - merge_requests
    - tags
    - master
